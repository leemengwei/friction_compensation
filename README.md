# friction_compensation

实验：第4轴在动。

又确认了下：
axc_torque_ffw_gravity_4  ==  最终电机输出的  == pid+前馈

×××规划：
第二列ms是时间，        Note: 来回往复，貌似没有间断, 需要自己取出。
第3列到第8各轴位置参考值，  Note: 所谓参考是指通过动力学模型的简单的规划。
第9到14列是速度参考值，             Note：规划为了保证其他轴静止，也需要给力、给速度。
第15到20列是计算力矩（除掉重力项）， Note: M(a)+C(v)，4轴朝天，有没有重力项一样。
#axc_torque_ffw_3
第39到44是计算力矩（全力矩）    Note:M(a)+C(v)+G(q),匀速阶段全力矩也差不多，只有在短暂的加速时力矩不一样。注意， 此处理论力矩纯路径规划给出的，而真实的路径并不是规划的，所以严格的话需要使用真实位置反馈重新规划一次，得到新的规划全力矩。
#axc_torque_ffw_gravity_3

×××过后：
第33到38是反馈力矩，   Note：即路“径规划+PID”的力，是“事后”的力。最终目标就是想预先知道这个力。重力项。
#servo_feedback_torque_3
第21到26是反馈位置，    Note: 不太用管，也是“事后”的。但可能训练要用。
第27到32是反馈速度，    Note: 不太用管，也是“事后”的。但可能训练要用。



10-09日志：
4轴多路经， 未加必要的轴数据！！
1、线性模型     12.18%
2、神经网络补偿     6.91% (100epoch后)
均为测试集合（20%, 高值区）


10-30日志：
加上了多轴的输入






使用时：
    提前得知：
        1、可知每个轴的位置随时间的规划；
        2、可知每个轴的速度随时间的规划；
        3、可知每个轴的力矩（G与M+C）随时间的规划；
    事后得知：
        4、得知每个轴的实际的位置随时间的变化；
        5、得知每个轴的实际的速度随时间的变化；
        6、得知每个轴的实际的力矩“前馈+反馈控制”；


作用的方式：

理想目标：    1）规划的力矩 + 摩擦力于运动路径 + 规划的不足 + 摩擦补偿    ==> 规划的运动（如果全部补偿，则此时PID=0）
                                                            
实测数据：    2）规划的力矩 + 摩擦力于运动路径 + 实时PID补偿             ==> 实际的运动（尽可能贴近规划的运动）
                      |                             |    |
                      --------- (实测输出的力)-------    --->（规划的不足+摩擦补偿）

实际目标：    3）规划的力矩 + 摩擦力于运动路径 + 预期的总补偿 + 实时PID补偿' ==> 补偿的运动



注意问题：
*严格的话需要使用真实位置反馈重新规划一次，得到新的规划全力矩。所以实际上我们训练时，补充的量中包含了规划路径和实际路径不一样的影响。
*网络可以无法接受的情况是具有相同输入，却对应不同标签的情况，所以G、M+C一定要分开作为两维度。类似的其它问题还包括：输入维度不足导致的模型自由度不够的情况——需要对自由度做相应探索。
*可探索的自由度（有实际意义的）需要提前得知。








